(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"k++A":function(e,n,t){"use strict";t.d(n,"a",(function(){return $e})),t.d(n,"b",(function(){return qe})),t.d(n,"c",(function(){return Te})),t.d(n,"d",(function(){return Ge})),t.d(n,"e",(function(){return se})),t.d(n,"f",(function(){return de})),t.d(n,"g",(function(){return fe})),t.d(n,"h",(function(){return ge})),t.d(n,"i",(function(){return xe})),t.d(n,"j",(function(){return he})),t.d(n,"k",(function(){return pe})),t.d(n,"l",(function(){return Ue})),t.d(n,"m",(function(){return Oe})),t.d(n,"n",(function(){return ie})),t.d(n,"o",(function(){return ae})),t.d(n,"p",(function(){return Me})),t.d(n,"q",(function(){return en})),t.d(n,"r",(function(){return nn})),t.d(n,"s",(function(){return Le})),t.d(n,"t",(function(){return We})),t.d(n,"u",(function(){return cn})),t.d(n,"v",(function(){return ln})),t.d(n,"w",(function(){return an})),t.d(n,"x",(function(){return un})),t.d(n,"y",(function(){return Pe})),t.d(n,"z",(function(){return rn}));var r=t("x+K8"),o=t.n(r),c=t("0LTs"),l=t.n(c),i=t("XWHH");function a(e){return"object"===typeof e&&"object"===typeof e.internal_resourceInfo}function u(e){const n=e;return"object"===typeof n&&"object"===typeof n.internal_resourceInfo&&"object"===typeof n.internal_resourceInfo.linkedResources}function s(e){const n=e;return"object"===typeof n.internal_changeLog&&Array.isArray(n.internal_changeLog.additions)&&Array.isArray(n.internal_changeLog.deletions)}class d extends Error{}function f(e){return"string"===typeof e?e:e.value}const g=async(e,n)=>{let r;return r=t("XWHH"),await r(e,n)},h=l.a.dataset,{quad:p,literal:w,namedNode:b,blankNode:y}=l.a,A={quad:p,literal:w,namedNode:b,blankNode:y};function m(e){const n=h();for(const t of e)n.add(t);return n}function R(e){var n,t,r;const c=null!==(t=null===(n=e.headers.get("Content-Type"))||void 0===n?void 0:n.split(";"))&&void 0!==t?t:[],l=c.length>0&&["text/turtle","application/ld+json"].includes(c[0]),i={sourceIri:e.url,isRawData:!l,contentType:null!==(r=e.headers.get("Content-Type"))&&void 0!==r?r:void 0,linkedResources:{}},a=e.headers.get("Link");if(a){const e=o.a.parse(a),n=e.get("rel","acl");1===n.length&&(i.aclUrl=new URL(n[0].uri,i.sourceIri).href),i.linkedResources=e.refs.reduce((e,n)=>{var t,r;return null!==(t=e[r=n.rel])&&void 0!==t||(e[r]=[]),e[n.rel].push(new URL(n.uri,i.sourceIri).href),e},i.linkedResources)}const u=e.headers.get("WAC-Allow");return u&&(i.permissions=function(e){function n(e){const n=e.split(" ");return n.includes("write")?{read:n.includes("read"),append:!0,write:!0,control:n.includes("control")}:{read:n.includes("read"),append:n.includes("append"),write:!1,control:n.includes("control")}}function t(e,n){const t=e.split(",").map(e=>e.split("=")).filter(e=>2===e.length&&e[0].trim()===n);if(1!==t.length)return"";const r=t[0][1].trim();return'"'!==r.charAt(0)||'"'!==r.charAt(r.length-1)?"":r.substring(1,r.length-1)}return{user:n(t(e,"user")),public:n(t(e,"public"))}}(u)),i}function j(e){let n;return n="function"===typeof e.slice?e.slice():"function"===typeof e.match?m(e):Object.assign({},e),Object.assign(n,function(e){const n={};return Object.keys(e).forEach(t=>{const r=e[t];"object"===typeof r&&null!==r?"undefined"!==typeof r.constructor&&"Object"===r.constructor.name&&(n[t]=r):n[t]=r}),n}(e))}function v(e){return!e.ok}const U={fetch:g};async function O(e,n=U){const t=Object.assign(Object.assign({},U),n),r=await t.fetch(e,{method:"HEAD"});if(v(r))throw new _(`Fetching the metadata of the Resource at [${e}] failed: [${r.status}] [${r.statusText}].`,r);return{internal_resourceInfo:R(r)}}function P(e){return a(e)?e.internal_resourceInfo.sourceIri:null}class _ extends d{constructor(e,n){super(e),this.response=n}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}}const L={fetch:g};async function T(e,n=L){const t=Object.assign(Object.assign({},L),n),r=f(e),o=await t.fetch(r,t.init);if(v(o))throw new _(`Fetching the File failed: [${o.status}] [${o.statusText}].`,o);const c=R(o),l=await o.blob();return Object.assign(l,{internal_resourceInfo:c})}const M={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",AuthenticatedAgent:"http://www.w3.org/ns/auth/acl#AuthenticatedAgent",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},$={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},C={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},I={Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},k={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"};async function S(e){const n=new((await N()).Writer)({format:"text/turtle"}),t=e.map(e=>A.quad(e.subject,e.predicate,e.object,void 0));n.addQuads(t);const r=new Promise((e,t)=>{n.end((n,r)=>{if(n)return t(n);e(r)})});return await r}async function N(){const e=await t.e(15).then(t.bind(null,"2uBJ"));return"undefined"!==typeof e.default?e.default:e}const D={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function E(e){return e?"true":"false"}function F(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&null}function q(e){return e.toISOString()}function x(e){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)/.test(e))return null;const[n,t]=e.split("T"),[r,o]="-"===n.charAt(0)?[-1,n.substring(1)]:[1,n],[c,l,i]=o.split("-"),a=Number.parseInt(c,10)*r,u=Number.parseInt(l,10)-1,s=Number.parseInt(i,10),[d,f]=function(e){if(e.endsWith("Z"))return[e.substring(0,e.length-1),"Z"];const n=e.split("+"),t=e.split("-");return n.length>t.length?[n[0],"+"+n[1]]:[t[0],"-"+t[1]]}(t),[g,h]=function(e){if("Z"===e)return[0,0];const n="+"===e.charAt(0)?1:-1,[t,r]=e.substring(1).split(":"),o=Number.parseInt(t,10),c=Number.parseInt(r,10);return[o*n,c*n]}(f),[p,w,b]=d.split(":"),y=Number.parseInt(p,10)+g,A=Number.parseInt(w,10)+h,[m,R]=b.split("."),j=Number.parseInt(m,10),v=R?Number.parseInt(R,10):0,U=new Date(Date.UTC(a,u,s,y,A,j,v));return a>=0&&a<100&&U.setUTCFullYear(U.getUTCFullYear()-1900),U}function W(e){const n=Number.parseFloat(e);return Number.isNaN(n)?null:n}function G(e){return e.toString()}function B(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}function z(e){return X(e)&&"NamedNode"===e.termType}function J(e){return X(e)&&"Literal"===e.termType}function X(e){return null!==e&&"object"===typeof e&&"string"===typeof e.termType&&"string"===typeof e.value&&"function"===typeof e.equals}function H(e){return X(e)&&"BlankNode"===e.termType&&"string"===typeof e.internal_name}function V(e){const n=f(e);if("function"!==typeof URL)return!0;try{new URL(n)}catch(t){return!1}return!0}function Z(e){if(!V(e))throw new ee(e);return z(e)?e:A.namedNode(e)}function Q(e,n,t={}){if(z(e)&&z(n))return e.equals(n);if(H(e)&&H(n))return e.internal_name===n.internal_name;if("undefined"===typeof t.resourceIri)return!1;const r=z(e)?e:Y(e,t.resourceIri),o=z(n)?n:Y(n,t.resourceIri);return r.equals(o)}function Y(e,n){return A.namedNode(K(e.internal_name,n))}function K(e,n){if("function"!==typeof URL)throw new Error("The URL interface is not available, so an IRI cannot be determined.");const t=new URL(n);return t.hash=e,t.href}class ee extends d{constructor(e){const n=z(e)?e.value:e;super(`Expected a valid URL, but received: [${n}].`),this.receivedValue=n}}function ne(e){var n,t,r,o,c,l,i,a;if(z(e))return`<${e.value}> (URL)`;if(J(e)){if(!z(e.datatype))return`[${e.value}] (RDF/JS Literal of unknown type)`;let u;switch(e.datatype.value){case D.boolean:return u=null!==(t=null===(n=F(e.value))||void 0===n?void 0:n.valueOf())&&void 0!==t?t:`Invalid data: \`${e.value}\``,u+" (boolean)";case D.dateTime:return u=null!==(o=null===(r=x(e.value))||void 0===r?void 0:r.toUTCString())&&void 0!==o?o:`Invalid data: \`${e.value}\``,u+" (datetime)";case D.decimal:return u=null!==(l=null===(c=W(e.value))||void 0===c?void 0:c.toString())&&void 0!==l?l:`Invalid data: \`${e.value}\``,u+" (decimal)";case D.integer:return u=null!==(a=null===(i=B(e.value))||void 0===i?void 0:i.toString())&&void 0!==a?a:`Invalid data: \`${e.value}\``,u+" (integer)";case D.langString:return`"${e.value}" (${e.language} string)`;case D.string:return`"${e.value}" (string)`;default:return`[${e.value}] (RDF/JS Literal of type: \`${e.datatype.value}\`)`}}return H(e)?`<#${e.internal_name}> (URL)`:"BlankNode"===e.termType?`[${e.value}] (RDF/JS BlankNode)`:"Quad"===e.termType?"??? (nested RDF* Quad)":"Variable"===e.termType?`?${e.value} (RDF/JS Variable)`:e}function te(e){return z(e)||H(e)?e:"string"===typeof e?Z(e):Ie(e)?e.internal_localSubject:Z($e(e))}function re(e){const n=m(e);return Ie(e)?(n.internal_localSubject=e.internal_localSubject,n):(n.internal_url=e.internal_url,n)}function oe(e,n){const t=function(e,n){const t=h();for(const r of e)n(r)&&t.add(r);return t}(e,n);return Ie(e)?(t.internal_localSubject=e.internal_localSubject,t):(t.internal_url=e.internal_url,t)}function ce(e){if(!Me(e))throw new ke(e)}function le(e){return s(e)?e:Object.assign(j(e),{internal_changeLog:{additions:[],deletions:[]}})}function ie(e,n){ce(e);const t=be(e,Ae(n));return null===t?null:t.object.value}function ae(e,n){return ce(e),ye(e,Ae(n)).map(e=>e.object.value)}const ue=ae;function se(e,n){ce(e);const t=je(e,n,D.boolean);return null===t?null:F(t)}function de(e,n){ce(e);const t=je(e,n,D.dateTime);return null===t?null:x(t)}function fe(e,n){ce(e);const t=je(e,n,D.integer);return null===t?null:B(t)}function ge(e,n){return ce(e),ve(e,n,D.integer).map(e=>B(e)).filter(e=>null!==e)}function he(e,n){return ce(e),je(e,n,D.string)}function pe(e,n){return ce(e),ve(e,n,D.string)}function we(e,n){return ce(e),ye(e,me(n)).map(e=>e.object)}function be(e,n){for(const t of e)if(n(t))return t;return null}function ye(e,n){const t=[];for(const r of e)n(r)&&t.push(r);return t}function Ae(e){if(!V(e))throw new Se(e);const n=Z(e);return function(e){return n.equals(e.predicate)&&z(e.object)}}function me(e){if(!V(e))throw new Se(e);const n=Z(e);return function(e){return n.equals(e.predicate)&&X(e.object)}}function Re(e,n){if(!V(e))throw new Se(e);const t=Z(e);return function(e){return t.equals(e.predicate)&&J(e.object)&&e.object.datatype.value===n}}function je(e,n,t){const r=be(e,Re(n,t));return null===r?null:r.object.value}function ve(e,n,t){return ye(e,Re(n,t)).map(e=>e.object.value)}function Ue(e,n,t={}){if(!H(n)&&!V(n))throw new De(n);const r=H(n)?n:Z(n),o=t.scope?Z(t.scope):null,c=e.match(r,null,null,o);if(0===c.size)return null;if(H(r)){return Object.assign(c,{internal_localSubject:r})}return Object.assign(c,{internal_url:r.value})}function Oe(e,n={}){const t=new Array;for(const r of e){const e=r.subject;z(e)&&!t.some(n=>Q(n,e))&&t.push(e),H(e)&&!t.some(n=>Q(n,e))&&t.push(e)}return t.map(t=>Ue(e,t,n))}function Pe(e,n){const t=Le(e,n);t.internal_changeLog={additions:[...t.internal_changeLog.additions],deletions:[...t.internal_changeLog.deletions]};for(const r of n){t.add(r);const e=t.internal_changeLog.deletions.find(e=>_e(r,e));"undefined"!==typeof e?t.internal_changeLog.deletions=t.internal_changeLog.deletions.filter(n=>n!==e):t.internal_changeLog.additions.push(r)}return t}function _e(e,n){return e.subject.equals(n.subject)&&n.predicate.equals(n.predicate)&&(e.object.equals(n.object)||"BlankNode"===e.object.termType&&"BlankNode"===n.object.termType)}function Le(e,n){const t=le(j(e));t.internal_changeLog={additions:[...t.internal_changeLog.additions],deletions:[...t.internal_changeLog.deletions]};const r=a(t)?P(t):void 0,o=te(n);return Array.from(t).forEach(e=>{(z(e.subject)||H(e.subject))&&Q(o,e.subject,{resourceIri:r})&&(t.delete(e),t.internal_changeLog.additions.includes(e)?t.internal_changeLog.additions=t.internal_changeLog.additions.filter(n=>n!==e):t.internal_changeLog.deletions.push(e))}),t}function Te(e={}){var n;if("undefined"!==typeof e.url){const n=e.url;if(!V(n))throw new De(n);return Object.assign(h(),{internal_url:n})}const t=function(e){return Object.assign(A.blankNode(),{internal_name:e})}(null!==(n=e.name)&&void 0!==n?n:Ee());return Object.assign(h(),{internal_localSubject:t})}function Me(e){return function(e){return"object"===typeof e&&null!==e&&"number"===typeof e.size&&"function"===typeof e.add&&"function"===typeof e.delete&&"function"===typeof e.has&&"function"===typeof e.match&&Array.from(e).length===e.size}(e)&&(Ie(e)||"string"===typeof e.internal_url)}function $e(e,n){if(Ie(e)){if("undefined"===typeof n)throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return K(e.internal_localSubject.internal_name,n)}return e.internal_url}const Ce=$e;function Ie(e){var n;return"string"===typeof(null===(n=e.internal_localSubject)||void 0===n?void 0:n.internal_name)&&"undefined"===typeof e.internal_url}class ke extends d{constructor(e){super(`Expected a Thing, but received: [${e}].`),this.receivedValue=e}}class Se extends d{constructor(e){const n=z(e)?e.value:e;super(`Expected a valid URL to identify a property, but received: [${n}].`),this.receivedProperty=n}}class Ne extends d{constructor(e){const n=z(e)?e.value:e;super(`Expected a valid URL value, but received: [${n}].`),this.receivedValue=n}}class De extends d{constructor(e){const n=z(e)?e.value:e;super(`Expected a valid URL to identify a Thing, but received: [${n}].`),this.receivedValue=n}}const Ee=()=>Date.now().toString()+Math.random().toString().substring("0.".length);function Fe(e){const n=new URL(e);return n.hash="",n.href}function qe(){return h()}async function xe(e,n=U){e=f(e);const t=Object.assign(Object.assign({},U),n),r=await t.fetch(e,{headers:{Accept:"text/turtle"}});if(v(r))throw new _(`Fetching the Resource at [${e}] failed: [${r.status}] [${r.statusText}].`,r);const o=await r.text(),c=await async function(e,n){const t=new((await N()).Parser)({format:"text/turtle",baseIRI:n});return new Promise((n,r)=>{const o=[];t.parse(e,(e,t,c)=>{if(e)return r(e);t?o.push(t):n(o)})})}(o,e),l=h();c.forEach(e=>l.add(e));const i=R(r);return Object.assign(l,{internal_resourceInfo:i})}async function We(e,n,t=U){e=f(e);const r=Object.assign(Object.assign({},U),t),o=le(n),c=Be(o,e)?await async function(e){return{method:"PATCH",body:`${e.internal_changeLog.deletions.length>0?`DELETE DATA {${(await S(e.internal_changeLog.deletions.map(Je))).trim()}};`:""} ${e.internal_changeLog.additions.length>0?`INSERT DATA {${(await S(e.internal_changeLog.additions.map(Je))).trim()}};`:""}`,headers:{"Content-Type":"application/sparql-update"}}}(o):await async function(e){return{method:"PUT",body:await S(Array.from(e).map(Je)),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${C.Resource}>; rel="type"`}}}(o),l=await r.fetch(e,c);if(v(l)){const n=Be(o,e)?"The changes that were sent to the Pod are listed below.\n\n"+function(e){if(!a(e))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!s(e)||0===e.internal_changeLog.additions.length&&0===e.internal_changeLog.deletions.length)return`## Changes compared to ${P(e)}\n\n`+`This SolidDataset has not been modified since it was fetched from ${P(e)}.\n`;let n=`## Changes compared to ${P(e)}\n`;const t=function(e){const n={};return e.internal_changeLog.deletions.forEach(t=>{var r,o,c;const l=H(t.subject)?Y(t.subject,P(e)):t.subject;if(!z(l)||!z(t.predicate))return;const i=f(l),a=f(t.predicate);null!==(r=n[i])&&void 0!==r||(n[i]={}),null!==(o=(c=n[i])[a])&&void 0!==o||(c[a]={added:[],deleted:[]}),n[i][a].deleted.push(t.object)}),e.internal_changeLog.additions.forEach(t=>{var r,o,c;const l=H(t.subject)?Y(t.subject,P(e)):t.subject;if(!z(l)||!z(t.predicate))return;const i=f(l),a=f(t.predicate);null!==(r=n[i])&&void 0!==r||(n[i]={}),null!==(o=(c=n[i])[a])&&void 0!==o||(c[a]={added:[],deleted:[]}),n[i][a].added.push(t.object)}),n}(e);return Object.keys(t).forEach(e=>{n+=`\n### Thing: ${e}\n`;const r=t[e];Object.keys(r).forEach(e=>{n+=`\nProperty: ${e}\n`;const t=r[e].deleted,o=r[e].added;t.length>0&&(n+="- Removed:\n",t.forEach(e=>n+=`  - ${ne(e)}\n`)),o.length>0&&(n+="- Added:\n",o.forEach(e=>n+=`  - ${ne(e)}\n`))})}),n}(o):"The SolidDataset that was sent to the Pod is listed below.\n\n"+ze(o);throw new _(`Storing the Resource at [${e}] failed: [${l.status}] [${l.statusText}].\n\n`+n,l)}const i=Object.assign(Object.assign({},R(l)),{isRawData:!1});return He(Object.assign(j(o),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:i}))}async function Ge(e,n=U){const t=Object.assign(Object.assign({},U),n),r=a(e)?f(P(e)):f(e),o=await t.fetch(r,{method:"DELETE"});if(v(o))throw new _(`Deleting the SolidDataset at [${r}] failed: [${o.status}] [${o.statusText}].`,o)}function Be(e,n){return s(e)&&a(e)&&"string"===typeof e.internal_resourceInfo.sourceIri&&function(e,n){return Fe(e.internal_resourceInfo.sourceIri)===Fe(n)}(e,n)}function ze(e){let n="";a(e)?n+=`# SolidDataset: ${e.internal_resourceInfo.sourceIri}\n`:n+="# SolidDataset (no URL yet)\n";const t=Oe(e);return 0===t.length?n+="\n<empty>\n":t.forEach(t=>{n+="\n"+function(e){let n="";Ie(e)?n+=`## Thing (no URL yet \u2014 identifier: \`#${e.internal_localSubject.internal_name}\`)\n`:n+=`## Thing: ${e.internal_url}\n`;const t=Array.from(e);if(0===t.length)n+="\n<empty>\n";else{const r=new Set(t.map(e=>e.predicate.value));for(const t of r){n+=`\nProperty: ${t}\n`,we(e,t).forEach(e=>{n+=`- ${ne(e)}\n`})}}return n}(t),s(e)&&(n+="\n"+function(e,n){const t=te(n),r=e.internal_changeLog.additions.reduce((e,n)=>n.subject.equals(t)?e+1:e,0),o=e.internal_changeLog.deletions.reduce((e,n)=>n.subject.equals(t)?e+1:e,0);return`(${1===r?"1 new value added":r+" new values added"} / ${1===o?"1 value removed":o+" values removed"})`}(e,t)+"\n")}),n}function Je(e){const n=H(e.subject)?Xe(e.subject):e.subject,t=H(e.object)?Xe(e.object):e.object;return Object.assign(Object.assign({},e),{subject:n,object:t})}function Xe(e){return A.namedNode("#"+e.internal_name)}function He(e){const n=P(e);return Array.from(e).forEach(t=>{const r=function(e,n){const t=H(e.subject)?Y(e.subject,n):e.subject,r=H(e.object)?Y(e.object,n):e.object;return Object.assign(Object.assign({},e),{subject:t,object:r})}(t,n);e.delete(t),e.add(r)}),e}const{Response:Ve}=i;function Ze(e){const n=qe();return Object.assign(n,{internal_resourceInfo:{sourceIri:f(e),isRawData:!1,contentType:"text/turtle",linkedResources:{}}})}const Qe=(e,n,t)=>{if(ce(e),!V(n))throw new Se(n);const r=Z(n),o=re(e);if(!Me(t)&&!V(t))throw new Ne(t);return o.add(A.quad(te(o),r,te(t))),o};function Ye(e,n){if(ce(e),!V(n))throw new Se(n);const t=Z(n);return oe(e,e=>!e.predicate.equals(t))}const Ke=(e,n,t)=>{if(ce(e),!V(n))throw new Se(n);const r=Z(n);if(!Me(t)&&!V(t))throw new Ne(t);const o=z(t)?t:Z("string"===typeof t?t:Ce(t));return oe(e,e=>!e.predicate.equals(r)||!z(e.object)||!e.object.equals(o))},en=(e,n,t)=>(ce(e),tn(e,n,D.integer,e=>B(e)===t));const nn=(e,n,t)=>(ce(e),tn(e,n,D.string,e=>e===t));function tn(e,n,t,r){if(!V(n))throw new Se(n);const o=Z(n);return oe(e,e=>!(e.predicate.equals(o)&&J(e.object)&&e.object.datatype.equals(A.namedNode(t))&&r(e.object.value)))}const rn=(e,n,t)=>{if(ce(e),!V(n))throw new Se(n);if(!Me(t)&&!V(t))throw new Ne(t);const r=Ye(e,n),o=Z(n);return r.add(A.quad(te(r),o,te(t))),r},on=rn,cn=(e,n,t)=>(ce(e),fn(e,n,E(t),D.boolean)),ln=(e,n,t)=>(ce(e),fn(e,n,q(t),D.dateTime)),an=(e,n,t)=>(ce(e),fn(e,n,G(t),D.integer));const un=(e,n,t)=>(ce(e),fn(e,n,t,D.string));function sn(e,n,t){return ce(e),dn(e,n,t)}function dn(e,n,t){if(ce(e),!V(n))throw new Se(n);const r=Ye(e,n),o=Z(n);return r.add(A.quad(te(r),o,t)),r}function fn(e,n,t,r){return sn(e,n,A.literal(t,A.namedNode(r)))}async function gn(e,n=U){if(!yn(e))return{resourceAcl:null,fallbackAcl:null};const t=await hn(e,n);return null===t?{resourceAcl:null,fallbackAcl:await pn(e,n)}:{resourceAcl:t,fallbackAcl:null}}async function hn(e,n=U){if(!yn(e))return null;try{const t=await xe(e.internal_resourceInfo.aclUrl,n);return Object.assign(t,{internal_accessTo:P(e)})}catch(t){return null}}async function pn(e,n=U){const t=new URL(P(e)),r=t.pathname;if("/"===r)return null;const o=wn(r),c=new URL(o,t.origin).href,l=await O(c,n);if(!yn(l))return null;const i=await hn(l,n);return null===i?pn(l,n):i}function wn(e){const n="/"===e.substring(e.length-1)?e.substring(0,e.length-1):e;return e.substring(0,n.lastIndexOf("/"))+"/"}function bn(e,n){return Object.assign(e,{internal_acl:n})}M.agent,M.agentClass,M.agentGroup,M.origin;function yn(e){return"string"===typeof e.internal_resourceInfo.aclUrl}function An(e){if(!rt(e))throw new Error(`An Access Control Resource for [${P(e)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return e.internal_acp.acr}function mn(e,n){return Object.assign(j(e),{internal_acp:Object.assign(Object.assign({},e.internal_acp),{acr:n})})}function Rn(e){let n=Te(e);return n=on(n,$.type,I.AccessControl),n}function jn(e,n){return Oe(An(e),n).filter(e=>ue(e,$.type).includes(I.AccessControl))}function vn(e,n){return mn(e,Pe(An(e),n))}function Un(e,n){return Qe(e,I.apply,n)}function On(e){return ue(e,I.apply)}function Pn(e,n){return Ke(e,I.apply,n)}function _n(e){return Ye(e,I.apply)}function Ln(e,n){return Qe(e,I.applyMembers,n)}function Tn(e){return ue(e,I.applyMembers)}function Mn(e){return Ye(e,I.applyMembers)}function $n(e){const n=jn(e);return 0===n.length?Rn():n[0]}function Cn(e){return u(e)&&Array.isArray(e.internal_resourceInfo.linkedResources[I.accessControl])&&1===e.internal_resourceInfo.linkedResources[I.accessControl].length}function In(e,n){var t;const r=An(e),o=P(r);let c=null!==(t=Ue(r,o))&&void 0!==t?t:Te({url:o});return c=Qe(c,I.access,n),mn(e,Pe(r,c))}function kn(e,n){var t;const r=An(e),o=P(r);let c=null!==(t=Ue(r,o))&&void 0!==t?t:Te({url:o});return c=Qe(c,I.accessMembers,n),mn(e,Pe(r,c))}function Sn(e){const n=An(e),t=Ue(n,P(n));return null===t?[]:ue(t,I.access)}function Nn(e){const n=An(e),t=Ue(n,P(n));return null===t?[]:ue(t,I.accessMembers)}function Dn(e,n){const t=An(e),r=Ue(t,P(t));return null===r?e:mn(e,Pe(t,Ke(r,I.access,n)))}function En(e,n){const t=An(e),r=Ue(t,P(t));return null===r?e:mn(e,Pe(t,Ke(r,I.accessMembers,n)))}function Fn(e){const n=An(e),t=Ue(n,P(n));return null===t?e:mn(e,Pe(n,Ye(t,I.access)))}function qn(e){const n=An(e),t=Ue(n,P(n));return null===t?e:mn(e,Pe(n,Ye(t,I.accessMembers)))}function xn(e,n){return vn(e,Un($n(e),n))}function Wn(e,n){return vn(e,Ln($n(e),n))}function Gn(e){const n=jn(e).map(e=>On(e)),t=new Set;return n.forEach(e=>{e.forEach(e=>t.add(e))}),Array.from(t)}function Bn(e){const n=jn(e).map(e=>Tn(e)),t=new Set;return n.forEach(e=>{e.forEach(e=>t.add(e))}),Array.from(t)}function zn(e,n){return jn(e).map(e=>Pn(e,n)).reduce(vn,e)}function Jn(e,n){return jn(e).map(e=>(function(e,n){return Ke(e,I.applyMembers,n)})(e,n)).reduce(vn,e)}function Xn(e){return jn(e).map(e=>_n(e)).reduce(vn,e)}function Hn(e){return jn(e).map(e=>Mn(e)).reduce(vn,e)}function Vn(e){let n=`# Access controls for ${P(e)}\n`;const t=Gn(e),r=Bn(e),o=Sn(e),c=Nn(e);return 0===t.length&&0===r.length&&0===o.length&&0===c.length&&(n+="\n<no policies specified yet>\n"),t.length>0&&(n+="\nThe following policies apply to this resource:\n- ",n+=t.join("\n- ")+"\n"),o.length>0&&(n+="\nThe following policies apply to the access control resource for this resource:\n- ",n+=o.join("\n- ")+"\n"),r.length>0&&(n+="\nThe following policies apply to the children of this resource:\n- ",n+=r.join("\n- ")+"\n"),c.length>0&&(n+="\nThe following policies apply to the access control resources for children of this resource:\n- ",n+=c.join("\n- ")+"\n"),n}async function Zn(e,n=U){const t=f(e),r=Object.assign(Object.assign({},U),n),o=await xe(t,r),c=await ot(o,r);return Object.assign(o,c)}async function Qn(e,n=U){const t=f(e),r=Object.assign(Object.assign({},U),n),o=await T(t,r),c=await ot(o,r);return Object.assign(o,c)}async function Yn(e,n=U){const t=f(e),r=Object.assign(Object.assign({},U),n),o=await O(t,r),c=await ot(o,r);return Object.assign(o,c)}async function Kn(e,n=U){const t=f(e),r=Object.assign(Object.assign({},U),n),o=await xe(t,r);if(yn(o)){return bn(o,await gn(o,r))}{const e=await ot(o,r);return Object.assign(o,e)}}async function et(e,n=U){const t=f(e),r=Object.assign(Object.assign({},U),n),o=await T(t,r);if(yn(o)){return bn(o,await gn(o,r))}{const e=await ot(o,r);return Object.assign(o,e)}}async function nt(e,n=U){const t=f(e),r=Object.assign(Object.assign({},U),n),o=await O(t,r);if(yn(o)){return bn(o,await gn(o,r))}{const e=await ot(o,r);return Object.assign(o,e)}}async function tt(e,n=U){const t=An(e),r=Object.assign(Object.assign({},U),n);return mn(e,await We(P(t),t,r))}function rt(e){return"object"===typeof e.internal_acp&&null!==e.internal_acp&&"object"===typeof e.internal_acp.acr&&null!==e.internal_acp.acr}async function ot(e,n){if(!Cn(e))return{internal_acp:{acr:null}};let t;try{t=await xe(e.internal_resourceInfo.linkedResources[I.accessControl][0],n)}catch(r){return{internal_acp:{acr:null}}}return P(e),P(t),{internal_acp:{acr:Object.assign(t,{accessTo:P(e)})}}}function ct(e){const n=Gn(e).map(Fe).concat(Bn(e).map(Fe)).concat(Sn(e).map(Fe)).concat(Nn(e).map(Fe));return Array.from(new Set(n))}function lt(e){return ue(e,$.type).includes(I.Rule)}function it(e,n){return Qe(e,I.allOf,n)}function at(e,n){return Ke(e,I.allOf,n)}function ut(e,n){return on(e,I.allOf,n)}function st(e){return ue(e,I.allOf)}function dt(e,n){return Qe(e,I.anyOf,n)}function ft(e,n){return Ke(e,I.anyOf,n)}function gt(e,n){return on(e,I.anyOf,n)}function ht(e){return ue(e,I.anyOf)}function pt(e,n){return Qe(e,I.noneOf,n)}function wt(e,n){return Ke(e,I.noneOf,n)}function bt(e,n){return on(e,I.noneOf,n)}function yt(e){return ue(e,I.noneOf)}function At(e){let n=Te({url:f(e)});return n=rn(n,$.type,I.Rule),n}function mt(e,n){const t=Ue(e,n);return null===t||ie(t,$.type)!==I.Rule?null:t}function Rt(e,n){const t=An(e),r=P(t),o=new URL(r);o.hash=`#${n}`;const c=Ue(t,o.href);return null!==c&&lt(c)?c:null}function jt(e){return Oe(e).filter(lt)}function vt(e,n){return Le(e,n)}function Ut(e,n){return Pe(e,n)}function Ot(e){return ue(e,I.agent).filter(e=>e!==I.PublicAgent&&e!==I.AuthenticatedAgent&&e!==I.CreatorAgent)}function Pt(e,n){const t=It(e),r=Nt(e),o=Ft(e);let c=on(e,I.agent,n);return t&&(c=kt(c)),r&&(c=Dt(c)),o&&(c=qt(c)),c}function _t(e,n){return Qe(e,I.agent,n)}function Lt(e,n){return Ke(e,I.agent,n)}function Tt(e){return ue(e,I.group)}function Mt(e,n){return on(e,I.group,n)}function $t(e,n){return Qe(e,I.group,n)}function Ct(e,n){return Ke(e,I.group,n)}function It(e){return ue(e,I.agent).filter(e=>e===I.PublicAgent).length>0}function kt(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return Qe(e,I.agent,I.PublicAgent)}function St(e){return Ke(e,I.agent,I.PublicAgent)}function Nt(e){return ue(e,I.agent).filter(e=>e===I.AuthenticatedAgent).length>0}function Dt(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return Qe(e,I.agent,I.AuthenticatedAgent)}function Et(e){return Ke(e,I.agent,I.AuthenticatedAgent)}function Ft(e){return ue(e,I.agent).filter(e=>e===I.CreatorAgent).length>0}function qt(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return Qe(e,I.agent,I.CreatorAgent)}function xt(e){return Ke(e,I.agent,I.CreatorAgent)}function Wt(e){return ue(e,I.client).filter(e=>e!==k.PublicOidcClient)}function Gt(e){return ue(e,I.client).filter(e=>e===k.PublicOidcClient).length>0}function Bt(e){return Qe(e,I.client,k.PublicOidcClient)}function zt(e){let n=`## Rule: ${$e(e)}\n\n`,t="";It(e)&&(t+="- Everyone\n"),Nt(e)&&(t+="- All authenticated agents\n"),Ft(e)&&(t+="- The creator of this resource\n"),Gt(e)&&(t+="- Users of any client application\n");const r=Ot(e);r.length>0&&(t+="- The following agents:\n  - ",t+=r.join("\n  - ")+"\n");const o=Tt(e);o.length>0&&(t+="- Members of the following groups:\n  - ",t+=o.join("\n  - ")+"\n");const c=Wt(e);return c.length>0&&(t+="- Users of the following client applications:\n  - ",t+=c.join("\n  - ")+"\n"),n+=t.length>0?"This rule applies to:\n"+t:"<empty>\n",n}function Jt(e){return ue(e,$.type).includes(I.Policy)}function Xt(e){let n=Te({url:f(e)});return n=rn(n,$.type,I.Policy),n}function Ht(e,n){const t=Ue(e,n);return null!==t&&Jt(t)?t:null}function Vt(e){return Oe(e).filter(e=>!Ie(e)&&Jt(e))}function Zt(e,n){return Le(e,n)}function Qt(e,n){return Pe(e,n)}function Yt(e,n){let t=Ye(e,I.allow);return!0===n.read&&(t=Qe(t,I.allow,I.Read)),!0===n.append&&(t=Qe(t,I.allow,I.Append)),!0===n.write&&(t=Qe(t,I.allow,I.Write)),t}function Kt(e){const n=ue(e,I.allow);return{read:n.includes(I.Read),append:n.includes(I.Append),write:n.includes(I.Write)}}function er(e,n){let t=Ye(e,I.deny);return!0===n.read&&(t=Qe(t,I.deny,I.Read)),!0===n.append&&(t=Qe(t,I.deny,I.Append)),!0===n.write&&(t=Qe(t,I.deny,I.Write)),t}function nr(e){const n=ue(e,I.deny);return{read:n.includes(I.Read),append:n.includes(I.Append),write:n.includes(I.Write)}}function tr(e,n){const t=An(e),r=P(t),o=new URL(r);o.hash=`#${n}`;const c=Ue(t,o.href);return Gn(e).includes(o.href)&&null!==c&&Jt(c)?c:null}function rr(e,n){const t=An(e),r=P(t),o=new URL(r);o.hash=`#${n}`;const c=Ue(t,o.href);return Sn(e).includes(o.href)&&null!==c&&Jt(c)?c:null}function or(e){function n(e,n){return n?"denied":e?"allowed":"unspecified"}const t=Kt(e),r=nr(e);let o=`## Policy: ${$e(e)}\n\n`;o+=`- Read: ${n(t.read,r.read)}\n`,o+=`- Append: ${n(t.append,r.append)}\n`,o+=`- Write: ${n(t.write,r.write)}\n`;const c=st(e),l=ht(e),i=yt(e);return 0===c.length&&0===l.length&&0===i.length&&(o+="\n<no rules specified yet>\n"),c.length>0&&(o+="\nAll of these rules should match:\n",o+="- "+c.join("\n- ")+"\n"),l.length>0&&(o+="\nAt least one of these rules should match:\n",o+="- "+l.join("\n- ")+"\n"),i.length>0&&(o+="\nNone of these rules should match:\n",o+="- "+i.join("\n- ")+"\n"),o}function cr(e){const n=new URL("access-control-resource",e).href;return Object.assign(Ze(n),{accessTo:e})}function lr(e,n=cr(P(e))){return Object.assign(j(e),{internal_acp:{acr:n,aprs:{}}})}const ir={getFileWithAccessDatasets:et,getFileWithAcr:Qn,getReferencedPolicyUrlAll:ct,getResourceInfoWithAccessDatasets:nt,getResourceInfoWithAcr:Yn,getSolidDatasetWithAccessDatasets:Kn,getSolidDatasetWithAcr:Zn,hasAccessibleAcr:rt,saveAcrFor:tt},ar={acrAsMarkdown:Vn,addAcrPolicyUrl:In,addMemberAcrPolicyUrl:kn,addMemberPolicyUrl:Wn,addPolicyUrl:xn,getAcrPolicyUrlAll:Sn,getMemberAcrPolicyUrlAll:Nn,getMemberPolicyUrlAll:Bn,getPolicyUrlAll:Gn,hasLinkedAcr:Cn,removeAcrPolicyUrl:Dn,removeAcrPolicyUrlAll:Fn,removeMemberAcrPolicyUrl:En,removeMemberAcrPolicyUrlAll:qn,removeMemberPolicyUrl:Jn,removeMemberPolicyUrlAll:Hn,removePolicyUrl:zn,removePolicyUrlAll:Xn},ur={createPolicy:Xt,getAllowModes:Kt,getDenyModes:nr,getPolicy:Ht,getPolicyAll:Vt,policyAsMarkdown:or,removePolicy:Zt,setAllowModes:Yt,setDenyModes:er,setPolicy:Qt},sr={addAgent:_t,addForbiddenRuleUrl:pt,addGroup:$t,addOptionalRuleUrl:dt,addRequiredRuleUrl:it,createRule:At,getAgentAll:Ot,getForbiddenRuleUrlAll:yt,getGroupAll:Tt,getOptionalRuleUrlAll:ht,getRequiredRuleUrlAll:st,getRule:mt,getRuleAll:jt,hasAuthenticated:Nt,hasCreator:Ft,hasPublic:It,removeAgent:Lt,removeForbiddenRuleUrl:wt,removeGroup:Ct,removeOptionalRuleUrl:ft,removeRequiredRuleUrl:at,removeRule:vt,ruleAsMarkdown:zt,setAgent:Pt,setForbiddenRuleUrl:bt,setGroup:Mt,setOptionalRuleUrl:gt,setRequiredRuleUrl:ut,setRule:Ut},dr={addMockAcrTo:lr,mockAcrFor:cr};function fr(e,n){return n?kt(e):St(e)}function gr(e,n){return n?Dt(e):Et(e)}function hr(e,n){return n?qt(e):xt(e)}const pr={getForbiddenRuleurlAll:yt,setPublic:fr,setAuthenticated:gr,setCreator:hr},wr=(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ir),ar),ur),sr),dr),pr),{getFileWithAccessDatasets:et,getFileWithAcr:Qn,getReferencedPolicyUrlAll:ct,getResourceInfoWithAccessDatasets:nt,getResourceInfoWithAcr:Yn,getSolidDatasetWithAccessDatasets:Kn,getSolidDatasetWithAcr:Zn,hasAccessibleAcr:rt,saveAcrFor:tt}),br={createPolicy:Xt,getAllowModes:Kt,getDenyModes:nr,getPolicy:Ht,getPolicyAll:Vt,policyAsMarkdown:or,removePolicy:Zt,setAllowModes:Yt,setDenyModes:er,setPolicy:Qt},yr={addAgent:_t,addForbiddenRuleUrl:pt,addGroup:$t,addOptionalRuleUrl:dt,addRequiredRuleUrl:it,createRule:At,getAgentAll:Ot,getForbiddenRuleUrlAll:yt,getGroupAll:Tt,getOptionalRuleUrlAll:ht,getRequiredRuleUrlAll:st,getRule:mt,getRuleAll:jt,hasAuthenticated:Nt,hasCreator:Ft,hasPublic:It,removeAgent:Lt,removeForbiddenRuleUrl:wt,removeGroup:Ct,removeOptionalRuleUrl:ft,removeRequiredRuleUrl:at,removeRule:vt,ruleAsMarkdown:zt,setAgent:Pt,setForbiddenRuleUrl:bt,setGroup:Mt,setOptionalRuleUrl:gt,setRequiredRuleUrl:ut,setRule:Ut},Ar={addMockAcrTo:lr,mockAcrFor:cr},mr={hasLinkedAcr:Cn,addAcrPolicyUrl:In,addMemberAcrPolicyUrl:kn,getAcrPolicyUrlAll:Sn,getMemberAcrPolicyUrlAll:Nn,removeAcrPolicyUrl:Dn,removeAcrPolicyUrlAll:Fn,removeMemberAcrPolicyUrl:En,removeMemberAcrPolicyUrlAll:qn},Rr={createControl:Rn,getControl:function(e,n,t){const r=Ue(An(e),n,t);return null!==r&&ue(r,$.type).includes(I.AccessControl)?r:null},getAllControl:jn,getControlAll:jn,setControl:vn,removeControl:function(e,n){const t=Le(An(e),n);return mn(e,t)},addPolicyUrl:Un,getPolicyUrlAll:On,removePolicyUrl:Pn,removePolicyUrlAll:_n,addMemberPolicyUrl:Ln,getMemberPolicyUrlAll:Tn,removeMemberPolicyUrl:Tn,removeMemberPolicyUrlAll:Mn,getForbiddenRuleurlAll:yt,setPublic:fr,setAuthenticated:gr,setCreator:hr};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wr),br),yr),Ar),mr),Rr);const jr={getFileWithAccessDatasets:et,getFileWithAcr:Qn,getReferencedPolicyUrlAll:ct,getResourceInfoWithAccessDatasets:nt,getResourceInfoWithAcr:Yn,getSolidDatasetWithAccessDatasets:Kn,getSolidDatasetWithAcr:Zn,hasAccessibleAcr:rt,saveAcrFor:tt},vr={acrAsMarkdown:Vn,addAcrPolicyUrl:In,addMemberAcrPolicyUrl:kn,addMemberPolicyUrl:Wn,addPolicyUrl:xn,getAcrPolicyUrlAll:Sn,getMemberAcrPolicyUrlAll:Nn,getMemberPolicyUrlAll:Bn,getPolicyUrlAll:Gn,hasLinkedAcr:Cn,removeAcrPolicyUrl:Dn,removeAcrPolicyUrlAll:Fn,removeMemberAcrPolicyUrl:En,removeMemberAcrPolicyUrlAll:qn,removeMemberPolicyUrl:Jn,removeMemberPolicyUrlAll:Hn,removePolicyUrl:zn,removePolicyUrlAll:Xn},Ur={createPolicy:Xt,getAllowModes:Kt,getDenyModes:nr,getPolicy:Ht,getPolicyAll:Vt,policyAsMarkdown:or,removePolicy:Zt,setAllowModes:Yt,setDenyModes:er,setPolicy:Qt,createResourcePolicyFor:function(e,n){const t=An(e),r=new URL(P(t));r.hash=`#${n}`;let o=Te({url:r.href});return o=rn(o,$.type,I.Policy),o},getResourceAcrPolicy:rr,getResourceAcrPolicyAll:function(e){const n=An(e);return Sn(e).map(e=>Ue(n,e)).filter(e=>null!==e&&Jt(e))},getResourcePolicy:tr,getResourcePolicyAll:function(e){const n=An(e);return Gn(e).map(e=>Ue(n,e)).filter(e=>null!==e&&Jt(e))},removeResourceAcrPolicy:function(e,n){const t=An(e);let r,o=n;if("string"===typeof o)try{new URL(o)}catch(c){const e=new URL(P(t));e.hash=`#${n}`,o=e.href}return r="string"===typeof o?o:z(o)?f(o):$e(o,P(t)),null===rr(e,new URL(r).hash.substring(1))?e:Dn(mn(e,Le(t,o)),r)},removeResourcePolicy:function(e,n){const t=An(e);let r,o=n;if("string"===typeof o)try{new URL(o)}catch(c){const e=new URL(P(t));e.hash=`#${n}`,o=e.href}return r="string"===typeof o?o:z(o)?f(o):$e(o,P(t)),null===tr(e,new URL(r).hash.substring(1))?e:zn(mn(e,Le(t,o)),r)},setResourceAcrPolicy:function(e,n){const t=An(e);return In(mn(e,Pe(t,n)),$e(n,P(t)))},setResourcePolicy:function(e,n){const t=An(e);return xn(mn(e,Pe(t,n)),$e(n,P(t)))}},Or={addAgent:_t,addGroup:$t,createRule:At,getAgentAll:Ot,getGroupAll:Tt,getRule:mt,getRuleAll:jt,removeAgent:Lt,removeGroup:Ct,removeRule:vt,ruleAsMarkdown:zt,setAgent:Pt,setGroup:Mt,setRule:Ut,addClient:function(e,n){return Qe(e,I.client,n)},getClientAll:Wt,hasAnyClient:Gt,removeClient:function(e,n){return Ke(e,I.client,n)},setAnyClient:Bt,setClient:function(e,n){const t=Gt(e);let r=on(e,I.client,n);return t&&(r=Bt(r)),r},removeAnyClient:function(e){return Ke(e,I.client,k.PublicOidcClient)},hasAuthenticated:Nt,hasCreator:Ft,hasPublic:It,setAuthenticated:Dt,setCreator:qt,setPublic:kt,removeAuthenticated:Et,removeCreator:xt,removePublic:St,getAnyOfRuleUrlAll:ht,addAnyOfRuleUrl:dt,removeAnyOfRuleUrl:ft,setAnyOfRuleUrl:gt,getAllOfRuleUrlAll:st,addAllOfRuleUrl:it,removeAllOfRuleUrl:at,setAllOfRuleUrl:ut,getNoneOfRuleUrlAll:yt,addNoneOfRuleUrl:pt,removeNoneOfRuleUrl:wt,setNoneOfRuleUrl:bt,createResourceRuleFor:function(e,n){const t=An(e),r=new URL(P(t));r.hash=`#${n}`;let o=Te({url:r.href});return o=rn(o,$.type,I.Rule),o},getResourceRule:Rt,getResourceRuleAll:function(e){return Oe(An(e)).filter(lt)},removeResourceRule:function(e,n){const t=An(e);let r;if("string"===typeof n)try{new URL(n),r=n}catch(c){const e=new URL(P(t));e.hash=`#${n}`,r=e.href}else r=z(n)?f(n):$e(n);const o=Rt(e,new URL(r).hash.substring(1));return null===o?e:mn(e,Le(t,o))},setResourceRule:function(e,n){return mn(e,Pe(An(e),n))}},Pr={addMockAcrTo:lr,mockAcrFor:cr};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},jr),vr),Ur),Or),Pr);I.agent,I.group}}]);